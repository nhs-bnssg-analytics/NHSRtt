<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply the parameters for renege and capacity (by months waited) to projections of capacity and referrals. If needed, or if validating your parameters, include the observed incomplete pathways by the number of months waited for the period prior to the period being projected (eg, a starting position) — apply_params_to_projections • NHSRtt</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply the parameters for renege and capacity (by months waited) to projections of capacity and referrals. If needed, or if validating your parameters, include the observed incomplete pathways by the number of months waited for the period prior to the period being projected (eg, a starting position) — apply_params_to_projections"><meta name="description" content="Apply the parameters for renege and capacity (by months waited) to
projections of capacity and referrals. If needed, or if validating your
parameters, include the observed incomplete pathways by the number of months
waited for the period prior to the period being projected (eg, a starting
position)"><meta property="og:description" content="Apply the parameters for renege and capacity (by months waited) to
projections of capacity and referrals. If needed, or if validating your
parameters, include the observed incomplete pathways by the number of months
waited for the period prior to the period being projected (eg, a starting
position)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NHSRtt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rtt-pipeline.html">Creating and validating a model</a></li>
    <li><a class="dropdown-item" href="../articles/animated-charts.html">Visualising projections</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Apply the parameters for renege and capacity (by months waited) to projections of capacity and referrals. If needed, or if validating your parameters, include the observed incomplete pathways by the number of months waited for the period prior to the period being projected (eg, a starting position)</h1>

      <div class="d-none name"><code>apply_params_to_projections.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Apply the parameters for renege and capacity (by months waited) to
projections of capacity and referrals. If needed, or if validating your
parameters, include the observed incomplete pathways by the number of months
waited for the period prior to the period being projected (eg, a starting
position)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">apply_params_to_projections</span><span class="op">(</span></span>
<span>  <span class="va">capacity_projections</span>,</span>
<span>  <span class="va">referrals_projections</span>,</span>
<span>  incomplete_pathways <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">renege_capacity_params</span>,</span>
<span>  <span class="va">max_months_waited</span>,</span>
<span>  surplus_treatment_redistribution_method <span class="op">=</span> <span class="st">"evenly"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-capacity-projections">capacity_projections<a class="anchor" aria-label="anchor" href="#arg-capacity-projections"></a></dt>
<dd><p>numeric; vector of projections for capacity for
each time step. This must be the same length as referrals_projections</p></dd>


<dt id="arg-referrals-projections">referrals_projections<a class="anchor" aria-label="anchor" href="#arg-referrals-projections"></a></dt>
<dd><p>numeric; vector of projections for reneges for
each time step. This must be the same length as capacity_projections</p></dd>


<dt id="arg-incomplete-pathways">incomplete_pathways<a class="anchor" aria-label="anchor" href="#arg-incomplete-pathways"></a></dt>
<dd><p>tibble; two column data frame or tibble, with
fields called months_waited_id (taking values 0 to the maximum months
waited group of interest), and incompletes (the count of the number of
incomplete pathways) representing the count of incomplete pathways at
timestep 0 (to initialise the model with)</p></dd>


<dt id="arg-renege-capacity-params">renege_capacity_params<a class="anchor" aria-label="anchor" href="#arg-renege-capacity-params"></a></dt>
<dd><p>tibble; three column data frame or tibble, with
fields called months_waited_id (taking values 0 to the maximum months
waited group of interest), and fields called capacity_param and
renege_param, which are outputs from the function
<code><a href="calibrate_capacity_renege_params.html">calibrate_capacity_renege_params()</a></code></p></dd>


<dt id="arg-max-months-waited">max_months_waited<a class="anchor" aria-label="anchor" href="#arg-max-months-waited"></a></dt>
<dd><p>integer; the maximum number of months to group
patients waiting times by for the analysis. Data are published up to 104
weeks, so 24 is likely to be the maximum useful value for this argument.</p></dd>


<dt id="arg-surplus-treatment-redistribution-method">surplus_treatment_redistribution_method<a class="anchor" aria-label="anchor" href="#arg-surplus-treatment-redistribution-method"></a></dt>
<dd><p>string; one of "none",
"evenly" or "prioritise_long_waiters"; should cases where the counts of
reneges and treatments exceed the counts of people waiting be
redistributed, and if so, which method should be used</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a tibble with fields for period_id, months_waited_id,
  calculated_treatments, reneges, incompletes and input_treatments</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">max_months</span> <span class="op">&lt;-</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="va">refs</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_dummy_data.html">create_dummy_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"referral"</span>,</span></span>
<span class="r-in"><span>  max_months_waited <span class="op">=</span> <span class="va">max_months</span>,</span></span>
<span class="r-in"><span>  number_periods <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">incomp</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_dummy_data.html">create_dummy_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"incomplete"</span>,</span></span>
<span class="r-in"><span>  max_months_waited <span class="op">=</span> <span class="va">max_months</span>,</span></span>
<span class="r-in"><span>  number_periods <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_dummy_data.html">create_dummy_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"complete"</span>,</span></span>
<span class="r-in"><span>  max_months_waited <span class="op">=</span> <span class="va">max_months</span>,</span></span>
<span class="r-in"><span>  number_periods <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="calibrate_capacity_renege_params.html">calibrate_capacity_renege_params</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  referrals <span class="op">=</span> <span class="va">refs</span>,</span></span>
<span class="r-in"><span>  incompletes <span class="op">=</span> <span class="va">incomp</span>,</span></span>
<span class="r-in"><span>  completes <span class="op">=</span> <span class="va">comp</span>,</span></span>
<span class="r-in"><span>  max_months_waited <span class="op">=</span> <span class="va">max_months</span>,</span></span>
<span class="r-in"><span>  redistribute_m0_reneges <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">future_capacity</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">300</span><span class="op">:</span><span class="fl">500</span>, <span class="fl">4</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">future_referrals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">300</span><span class="op">:</span><span class="fl">500</span>, <span class="fl">4</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">incompletes_t0</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  months_waited_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">max_months</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  incompletes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">100</span><span class="op">:</span><span class="fl">200</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">max_months</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">projections</span> <span class="op">&lt;-</span> <span class="fu">apply_params_to_projections</span><span class="op">(</span></span></span>
<span class="r-in"><span>  capacity_projections <span class="op">=</span> <span class="va">future_capacity</span>,</span></span>
<span class="r-in"><span>  referrals_projections <span class="op">=</span> <span class="va">future_referrals</span>,</span></span>
<span class="r-in"><span>  incomplete_pathways <span class="op">=</span> <span class="va">incompletes_t0</span>,</span></span>
<span class="r-in"><span>  renege_capacity_params <span class="op">=</span> <span class="va">params</span>,</span></span>
<span class="r-in"><span>  max_months_waited <span class="op">=</span> <span class="va">max_months</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in arrange(dplyr::bind_rows(dplyr::summarise(mutate(incomplete_pathways,     period_id = period, months_waited_id = case_when(.data$months_waited_id ==         max_months_waited ~ max_months_waited, .default = .data$months_waited_id +         1)), node_inflow = sum(.data$incompletes), .by = c("period_id",     "months_waited_id")), dplyr::tibble(period_id = period, months_waited_id = 0,     node_inflow = referrals_projections[period])), months_waited_id):</span> could not find function "arrange"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Fox, Richard Wood, Richard Blackwell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

